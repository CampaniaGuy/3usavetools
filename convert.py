import sys
from save_indices import saveFileSwap

def convertToWiiU(file, out):
    src = open(file, 'rb')
    src.seek(4)
    srcBytes = src.read()
    src.close()
    dstBytes = [0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x14, 0xEA, 0xA7, 0x2B, 0x10, 0x00, 0x00, 0x00, 0x0C, 0x00, 0x00, 0x8A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2C]
    dstBytes += list(srcBytes)

    for i in saveFileSwap:
        rev = list(srcBytes[i[0]:i[1]])
        rev.reverse()
        for j, b in enumerate(rev):
            dstBytes[0x28 + i[0] + j] = b

    dst = open(out, 'wb')
    dst.write(bytes(dstBytes))
    dst.close()


if __name__ == '__main__':
    convertToWiiU(sys.argv[1], sys.argv[2])